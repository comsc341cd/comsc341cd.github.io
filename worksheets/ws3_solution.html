
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WS 3 Solution 📊 &#8212; COMSC341-CD: Causal Inference for Data Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=a37d84e8" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="application/vnd.jupyter.widget-state+json">{"state": {"ddae9e5c9af342aebee0eab8141614bc": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "08905a7e32324999bc983c64ef9a66b6": {"model_name": "VBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": ["widget-interact"], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_2c79c72ae1a44e1581dde89e4fcaeb4c", "IPY_MODEL_dcfd968c07ad428f92c4c5ac68202f8d", "IPY_MODEL_3c2b07e0100547b1b05e3936f7374b3b"], "layout": "IPY_MODEL_ddae9e5c9af342aebee0eab8141614bc", "tabbable": null, "tooltip": null}}, "352771121efd494a838d1b049d897be2": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6e4a62bfc54b44799039ef248a259f1a": {"model_name": "DescriptionStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "description_width": ""}}, "2c79c72ae1a44e1581dde89e4fcaeb4c": {"model_name": "DropdownModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DropdownModel", "_options_labels": ["0.2", "0.4", "0.6", "0.8", "1.0"], "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "DropdownView", "description": "sample_frac", "description_allow_html": false, "disabled": false, "index": 0, "layout": "IPY_MODEL_352771121efd494a838d1b049d897be2", "style": "IPY_MODEL_6e4a62bfc54b44799039ef248a259f1a", "tabbable": null, "tooltip": null}}, "10e5889830c0407e93bb2d79f0aac265": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "efe8b31c7cce46f9817fcb50dcffc250": {"model_name": "ButtonStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "button_color": null, "font_family": null, "font_size": null, "font_style": null, "font_variant": null, "font_weight": null, "text_color": null, "text_decoration": null}}, "dcfd968c07ad428f92c4c5ac68202f8d": {"model_name": "ButtonModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ButtonView", "button_style": "", "description": "Run Interact", "disabled": false, "icon": "", "layout": "IPY_MODEL_10e5889830c0407e93bb2d79f0aac265", "style": "IPY_MODEL_efe8b31c7cce46f9817fcb50dcffc250", "tabbable": null, "tooltip": null}}, "ab560d4e998942c9ae7911acc9094b78": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3c2b07e0100547b1b05e3936f7374b3b": {"model_name": "OutputModel", "model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_ab560d4e998942c9ae7911acc9094b78", "msg_id": "", "outputs": [], "tabbable": null, "tooltip": null}}, "567d09d422934fee85a478eb0f94c7dd": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "41c96694830f4798bba062db2b88c84a": {"model_name": "VBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": ["widget-interact"], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_82e05be5442e428ea1a56b5a2e38e1c6", "IPY_MODEL_42550b9b9fc0404e862cc38bddb7d2e0", "IPY_MODEL_8c1c305fe8b048b4bde42fa2d091b266"], "layout": "IPY_MODEL_567d09d422934fee85a478eb0f94c7dd", "tabbable": null, "tooltip": null}}, "bb909a5134ea405da138a3b4a9a88d10": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c3ebff24ecaf44d7bad323cb582c45ac": {"model_name": "DescriptionStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "description_width": ""}}, "82e05be5442e428ea1a56b5a2e38e1c6": {"model_name": "DropdownModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DropdownModel", "_options_labels": ["0.2", "0.4", "0.6", "0.8", "1.0"], "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "DropdownView", "description": "sample_frac", "description_allow_html": false, "disabled": false, "index": 0, "layout": "IPY_MODEL_bb909a5134ea405da138a3b4a9a88d10", "style": "IPY_MODEL_c3ebff24ecaf44d7bad323cb582c45ac", "tabbable": null, "tooltip": null}}, "87855805f4f54088989cce6c406337fc": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6ce3a18f2f9e4a33b21fa2860ade152f": {"model_name": "ButtonStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "button_color": null, "font_family": null, "font_size": null, "font_style": null, "font_variant": null, "font_weight": null, "text_color": null, "text_decoration": null}}, "42550b9b9fc0404e862cc38bddb7d2e0": {"model_name": "ButtonModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ButtonView", "button_style": "", "description": "Run Interact", "disabled": false, "icon": "", "layout": "IPY_MODEL_87855805f4f54088989cce6c406337fc", "style": "IPY_MODEL_6ce3a18f2f9e4a33b21fa2860ade152f", "tabbable": null, "tooltip": null}}, "8beddfe8db704883b8f2cffd0e9c1ff8": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8c1c305fe8b048b4bde42fa2d091b266": {"model_name": "OutputModel", "model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_8beddfe8db704883b8f2cffd0e9c1ff8", "msg_id": "", "outputs": [], "tabbable": null, "tooltip": null}}, "c1eb2bafa9c5450fb6dd5ef79842e59f": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cd378644a0f348a0a21a546db33a542c": {"model_name": "VBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": ["widget-interact"], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_9c52307b7fed4887a76c684776ed60b7", "IPY_MODEL_e76e6aeeb41a4cdcbaa61a68c81db0fb", "IPY_MODEL_aeeef6a17cbf4bd2bfd0ec92c5748346"], "layout": "IPY_MODEL_c1eb2bafa9c5450fb6dd5ef79842e59f", "tabbable": null, "tooltip": null}}, "b6023350eb0f454b91b4066d80396247": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8e8720918d6047568310281f8ac87f80": {"model_name": "DescriptionStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "description_width": ""}}, "9c52307b7fed4887a76c684776ed60b7": {"model_name": "DropdownModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "DropdownModel", "_options_labels": ["Asia", "Europe", "Africa", "Americas", "Oceania"], "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "DropdownView", "description": "param1", "description_allow_html": false, "disabled": false, "index": 0, "layout": "IPY_MODEL_b6023350eb0f454b91b4066d80396247", "style": "IPY_MODEL_8e8720918d6047568310281f8ac87f80", "tabbable": null, "tooltip": null}}, "ff9b8e6445154cf3af423f1c493e494b": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "30f4e50a1293451d8f0342914da67340": {"model_name": "ButtonStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "button_color": null, "font_family": null, "font_size": null, "font_style": null, "font_variant": null, "font_weight": null, "text_color": null, "text_decoration": null}}, "e76e6aeeb41a4cdcbaa61a68c81db0fb": {"model_name": "ButtonModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ButtonModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ButtonView", "button_style": "", "description": "Run Interact", "disabled": false, "icon": "", "layout": "IPY_MODEL_ff9b8e6445154cf3af423f1c493e494b", "style": "IPY_MODEL_30f4e50a1293451d8f0342914da67340", "tabbable": null, "tooltip": null}}, "965c72fca5e44fb4b040e7cae93445fa": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "aeeef6a17cbf4bd2bfd0ec92c5748346": {"model_name": "OutputModel", "model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_965c72fca5e44fb4b040e7cae93445fa", "msg_id": "", "outputs": [], "tabbable": null, "tooltip": null}}}, "version_major": 2, "version_minor": 0}</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script crossorigin="anonymous" data-jupyter-widgets-cdn="https://cdn.jsdelivr.net/npm/" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.6/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'worksheets/ws3_solution';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="WS 4 Solution 📈" href="ws4_solution.html" />
    <link rel="prev" title="WS 2 Solution 🐼" href="ws2_solution.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">COMSC341-CD: Causal Inference for Data Science</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Causal Inference for Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Syllabus</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus/values.html">Goals and Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/policies.html">Course Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/schedule.html">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/office_hours.html">Office Hours</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources/submit.html">How to Run and Submit</a></li>


<li class="toctree-l1"><a class="reference internal" href="../resources/catalog.html">Causal Catalog</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ws1.html">Worksheet 1 🎲</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws2.html">Worksheet 2 🐼</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws3.html">Worksheet 3 📊</a></li>







<li class="toctree-l1"><a class="reference internal" href="ws4.html">Worksheet 4 📈</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheet Solutions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ws1_solution.html">WS 1 Solution 🎲</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws2_solution.html">WS 2 Solution 🐼</a></li>






<li class="toctree-l1 current active"><a class="current reference internal" href="#">WS 3 Solution 📊</a></li>







<li class="toctree-l1"><a class="reference internal" href="ws4_solution.html">WS 4 Solution 📈</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projects/proj1.html">Project 1 👶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/proj2.html">Project 2 👥</a></li>

<li class="toctree-l1"><a class="reference internal" href="../projects/final_project.html">Final Project 🌍</a></li>





</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://comsc341cd-hub-sp.mtholyoke.edu/hub/user-redirect/git-pull?repo=https%3A//github.com/comsc341cd/comsc341cd.github.io&urlpath=tree/comsc341cd.github.io/worksheets/ws3_solution.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on JupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterHub logo" src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/worksheets/ws3_solution.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>WS 3 Solution 📊</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">WS 3 Solution 📊</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#seaborn-and-matplotlib-1-5-pts">1. Seaborn and Matplotlib [1.5 pts]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-bootstrap-technique-1-pt">2. The bootstrap technique [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-interactivity-1-pt">3. Adding interactivity [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#causal-roadmap-cintron-et-al-2021-1-pt">4. Causal roadmap: Cintron et al. 2021 [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-0-5-pts">5. Reflection [0.5 pts]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#acknowledgements">Acknowledgements</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ws-3-solution">
<h1>WS 3 Solution 📊<a class="headerlink" href="#ws-3-solution" title="Link to this heading">#</a></h1>
<blockquote class="epigraph">
<div><p>Visualization and the bootstrap</p>
<p class="attribution">—TODO your name here</p>
</div></blockquote>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="learning-objectives">
<h1>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Become familiar with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> for visualizing data</p></li>
<li><p>Learn to use <code class="docutils literal notranslate"><span class="pre">ipywidgets</span></code> for creating interactive plots</p></li>
<li><p>Develop an intuition for bootstrap sampling</p></li>
<li><p>Read and reflect on a real-world case study using the causal roadmap</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="seaborn-and-matplotlib-1-5-pts">
<h1>1. Seaborn and Matplotlib [1.5 pts]<a class="headerlink" href="#seaborn-and-matplotlib-1-5-pts" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="https://matplotlib.org/stable/users/explain/quick_start.html#quick-start">matplotlib</a> and <a class="reference external" href="https://seaborn.pydata.org/tutorial/introduction.html">seaborn</a> are two of the most popular libraries for creating visualizations in Python, with seaborn being a higher-level library built on top of matplotlib. We’ll use seaborn whenever possible, but to have the greatest degree of contol over your visualizations, it is important to also understand the fundamentals of matplotlib.</p>
<p>We’ll explore both libraries in this worksheet through an exploration of the <a class="reference external" href="https://www.gapminder.org/">Gapminder</a> dataset of GDP and life expectancy across countries.</p>
<p>The following official resources are good starting references for both libraries:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://matplotlib.org/stable/users/explain/quick_start.html#quick-start">matplotlib quick start</a></p></li>
<li><p><a class="reference external" href="https://seaborn.pydata.org/tutorial/function_overview.html">seaborn plotting overview</a></p></li>
<li><p><a class="reference external" href="https://seaborn.pydata.org/tutorial/data_structure.html">seaborn data structures</a></p></li>
</ul>
<div class="note admonition">
<p class="admonition-title">Reading notes</p>
<ul class="simple">
<li><p>If you are new to matplotlib, I would suggest reading “A simple example,” “Parts of a figure,” and “Coding style” sections of the matplotlib quickstart, trying out the code examples in a cell below, and using the rest of the guide as reference for when you need to customize your plots.</p>
<ul>
<li><p>In particular, the “Coding style” section is useful for understanding matplotlib examples that differ based on whether they are using the “object-oriented” or “pyplot” approach.</p></li>
</ul>
</li>
<li><p>From the seaborn plotting overview, we will primarily be using axes-level functions as opposed to the figure-level functions in order for more seamless integration with the matplotlib API.</p>
<ul>
<li><p>Also note that the seaborn axes-level function examples use the object-oriented approach to matplotlib where figure <code class="docutils literal notranslate"><span class="pre">f</span></code> and axes <code class="docutils literal notranslate"><span class="pre">axs</span></code> objects are explicitly created.</p></li>
</ul>
</li>
<li><p>From the seaborn data structures reference: the data we will be working with in the course will primarily be in the “long” format, where each variable is a column and each observation is a row. Thus we’ll frequently be using the <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">hue</span></code> parameters in our seaborn functions.</p></li>
</ul>
</div>
<p>First let’s import both seaborn and matplotlib using their standard import idioms along with pandas and numpy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># standard import aliases for seaborn and matplotlib</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we’ll load in the gapminder dataset of GDP and life expectancy across countries. Below are dsecriptions of the columns in the dataset:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code> - The country</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">continent</span></code> - The continent the country is in</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">year</span></code> - The year data was collected. Ranges from 1952 to 2007 in increments of 5 years</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lifeExp</span></code> - Life expectancy at birth, in years</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop</span></code> - Population</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gdpPercap</span></code> - GDP per capita (US$, inflation-adjusted)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load the gapminder dataset and peek at its columns</span>
<span class="n">gapminder_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;~/COMSC-341CD/data/gapminder.csv&quot;</span><span class="p">)</span>
<span class="n">gapminder_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>continent</th>
      <th>year</th>
      <th>lifeExp</th>
      <th>pop</th>
      <th>gdpPercap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1952</td>
      <td>28.801</td>
      <td>8425333</td>
      <td>779.445314</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1957</td>
      <td>30.332</td>
      <td>9240934</td>
      <td>820.853030</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1962</td>
      <td>31.997</td>
      <td>10267083</td>
      <td>853.100710</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1967</td>
      <td>34.020</td>
      <td>11537966</td>
      <td>836.197138</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1972</td>
      <td>36.088</td>
      <td>13079460</td>
      <td>739.981106</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>1.1.</strong> Provide examples of a <strong>descriptive</strong> and <strong>causal</strong> question that could be asked with the variables in the dataset.</p>
<p><strong>Your Response</strong>:
Descriptive question: How has the life expectancy in Asia changed over time?
Causal Question: Does an increase in gdp per capita lead to lower population growth?</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gapminder dataset is an example where we have multiple observations per sample over time, as opposed to having a single observation per sample. We’ll learn about causal study designs that can be used to handle time series data in the second half of the course.</p>
</div>
<p>Seaborn has tight integration with pandas, which allows us to use pandas to filter and manipulate the data before passing it to seaborn. Let’s generate a <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.scatterplot.html#seaborn.scatterplot">sns.scatterplot</a> of GDP per capita vs. life expectancy in the year 2007.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select out the data for the year 2007</span>
<span class="n">gapminder_2007_df</span> <span class="o">=</span> <span class="n">gapminder_df</span><span class="p">[</span><span class="n">gapminder_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2007</span><span class="p">]</span>

<span class="c1"># Notice how we can use the `data` parameter to pass in the dataframe, and the `x` and `y` parameters to specify the columns to plot.</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">gapminder_2007_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;gdpPercap&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;GDP per capita vs. life expectancy in 2007&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;GDP per capita (USD)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Life expectancy (years)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a7a571f347e64016ad4bfa0f3c0554590842bb6122610f293de9d1c44689d61f.png" src="../_images/a7a571f347e64016ad4bfa0f3c0554590842bb6122610f293de9d1c44689d61f.png" />
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to follow the basics of good figure design when creating your plots, which includes having a title, axis labels with units, and a legend.</p>
</div>
<p>Additionally, many seaborn plots take a <code class="docutils literal notranslate"><span class="pre">hue</span></code> parameter, which allows us to group the plots by a column in our dataframe and color them differently – this is analogous to the <code class="docutils literal notranslate"><span class="pre">groupby</span></code> operation in pandas. Let’s color the points by continent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The alpha parameter controls the transparency of the points, which is useful for seeing overlapping data.</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">gapminder_2007_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;gdpPercap&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;GDP per capita vs. life expectancy in 2007&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;GDP per capita (USD)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Life expectancy (years)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a83e7a82adf9270eea9bb3c4da5bd58b3b2080381560a82abc7a082a71498baa.png" src="../_images/a83e7a82adf9270eea9bb3c4da5bd58b3b2080381560a82abc7a082a71498baa.png" />
</div>
</div>
<p>This pattern of passing in a dataframe via <code class="docutils literal notranslate"><span class="pre">data</span></code>, specifying the columns to plot via <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> is common across seaborn functions.</p>
<p><strong>1.2.</strong> Generate a <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.lineplot.html#seaborn.lineplot">sns.lineplot</a> of life expectancy over time for three countries of your choice, where the lines are colored by country.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># three countries to plot</span>
<span class="n">countries</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;India&#39;</span><span class="p">,</span><span class="s1">&#39;Singapore&#39;</span><span class="p">,</span><span class="s1">&#39;China&#39;</span><span class="p">]</span>
<span class="n">gapminder_life_exp</span> <span class="o">=</span> <span class="n">gapminder_df</span><span class="p">[</span><span class="n">gapminder_df</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">countries</span><span class="p">)]</span>

<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">gapminder_life_exp</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Life expectancy of India, Singapore and China over the years&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Life expectancy (years)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/9071202860c1b7afc476a92aae6da62e1d06af697c3dfc6ddd9813617030b893.png" src="../_images/9071202860c1b7afc476a92aae6da62e1d06af697c3dfc6ddd9813617030b893.png" />
</div>
</div>
<p>We’ll also frequently visualize the shape or distribution of a variable through histograms or kernel density estimates (kde plots). Seaborn again provides convenient functions for this.</p>
<p>Let’s again look at the 2007 data, but now examine the distribution of life expectancy for three continents through a <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.histplot.html">sns.histplot</a>. Here the y-axis will be the frequency of data points in a discrete number of bins. Experiment with the <code class="docutils literal notranslate"><span class="pre">bins</span></code> parameter, which controls the number of bins to use in the histogram, to see how it affects the ease of visualizing the different distributions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">continent_2007_df</span> <span class="o">=</span> <span class="n">gapminder_2007_df</span><span class="p">[</span><span class="n">gapminder_2007_df</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Asia&#39;</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">,</span> <span class="s1">&#39;Africa&#39;</span><span class="p">])]</span>
<span class="c1"># Notes that we only need to specify the x parameter, as the y-axis data count</span>
<span class="c1"># Do different settings make it easier or harder to see the shape of the distribution?</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">continent_2007_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Life Expectancy in 2007: Asia, Europe, Africa&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Life Expectancy&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/b17a7bd6333ff2f64ab3fabf2f1d6dae90a098849dd5c1204a86e25ae4885483.png" src="../_images/b17a7bd6333ff2f64ab3fabf2f1d6dae90a098849dd5c1204a86e25ae4885483.png" />
</div>
</div>
<p>It is a little difficult to see the shape of the distribution with the bins overlaid on top of each other, so let’s use a <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.kdeplot.html">sns.kdeplot</a> to produce an another view on the data. KDE plots visualize the distribution of observations, much like a histogram, but apply a smoothing transformation to make the shape of the distribution easier to see.</p>
<p><strong>1.3.</strong> Create a kde plot for the life expectancy of the three continents below, using the same parameters as the histogram above, except omit the <code class="docutils literal notranslate"><span class="pre">bins</span></code> parameter:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">continent_2007_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Life Expectancy in 2007: Asia, Europe, Africa&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Life Expectancy&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/4191fe61fc7bbd744d67d6c7f2d6d655daaf43fa5f6f3c633c029f32fa3ee568.png" src="../_images/4191fe61fc7bbd744d67d6c7f2d6d655daaf43fa5f6f3c633c029f32fa3ee568.png" />
</div>
</div>
<p><strong>1.4.</strong> Briefly describe differences that you observe between the distributions of life expectancy for the three continents. Some questions to consider:</p>
<ul class="simple">
<li><p>Around what values are the peaks of the distributions (central tendency)?</p></li>
<li><p>Do some of the distributions seem more or less spread out than others (variability)?</p></li>
<li><p>Do any of the distributions seem to have multiple peaks (multimodality)?</p></li>
<li><p>Do any of the distributions seem to have “tails” where there are fewer observations at relatively extreme values for the continent?</p></li>
</ul>
<p><strong>Your Response</strong>: Varies, but the peaks of the dsitrubution for Asia, Europe and Africa are at ~72 years, ~80 years, and ~50 years respectively. The distributions for Africa and Asia are much more spread out than Europe and thus have more variability. The distributions for Africa and Europe show smaller local peaks as well. The distribution for Europe has very few observations for extreme values for the continent.</p>
<p><strong>1.5</strong> We’ve explored two of the three types of <a class="reference external" href="https://seaborn.pydata.org/tutorial.html#plotting-functions">plotting functions</a> that seaborn provides:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://seaborn.pydata.org/tutorial/relational.html">Visualizing statistical relationships</a></p></li>
<li><p><a class="reference external" href="https://seaborn.pydata.org/tutorial/distributions.html">Visualizing distributions of data</a></p></li>
</ul>
<p>Let’s now explore the third type of plotting function in an more open-ended way. Pick a seaborn plotting function that can be used to visualize categorical data, linked below:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://seaborn.pydata.org/tutorial/categorical.html">Visualizing categorical data</a></p></li>
</ul>
<p>In your response, briefly describe the functionality of the plotting function you chose, and give an <strong>descriptive</strong> question that you could answer with the plot. Then, generate a plot of your choice using the function, and describe what the plot is revealing about the data.</p>
<ul class="simple">
<li><p>Categorical variables in the dataset:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">continent</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">year</span></code> (can be used as a categorical variable, depending on the question we want to ask!)</p></li>
</ul>
</li>
<li><p>Continuous variables in the dataset:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">lifeExp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gdpPercap</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>Your Response</strong>: Varies!</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="the-bootstrap-technique-1-pt">
<h1>2. The bootstrap technique [1 pt]<a class="headerlink" href="#the-bootstrap-technique-1-pt" title="Link to this heading">#</a></h1>
<p>Here, we’ll explore the bootstrap technique, which is a powerful technique for helping us quantify uncertainty in any <strong>estimates</strong> we produce from our data.</p>
<p>The goal whenever we’re producing an estimate from our data is to learn something about the underyling population from which our data was sampled. These statistics, like the estimated expectations we’ve been calculating, tell us something about the population. For example, suppose we’re healthcare policy analysts trying to understand the average cholesterol levels in the US adult population. In an ideal world, we would measure the cholesterol level of every person in the US – but that is not practical. Instead, we collect a smaller sample of people, and calculate the average cholesterol level in our sample. Here, we’ll be re-using the NHANES dataset from last worksheet as our cholesterol sample:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nhanes.load</span> <span class="kn">import</span> <span class="n">load_NHANES_data</span>

<span class="n">nhanes_df</span> <span class="o">=</span> <span class="n">load_NHANES_data</span><span class="p">()</span>

<span class="c1"># filter to adults, and only include those with a valid cholesterol measurement</span>
<span class="n">cholesterol_df</span> <span class="o">=</span> <span class="n">nhanes_df</span><span class="p">[</span><span class="n">nhanes_df</span><span class="p">[</span><span class="s1">&#39;AgeInYearsAtScreening&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">]</span>
<span class="n">cholesterol_df</span> <span class="o">=</span> <span class="n">cholesterol_df</span><span class="p">[</span><span class="n">cholesterol_df</span><span class="p">[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()][[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]]</span>

<span class="n">cholesterol_df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(5176, 1)
</pre></div>
</div>
</div>
</div>
<p>Since our sample of roughly 5,000 people is just one of many different samples that could have been collected, there will be some variability in the estimates we get from different samples. We’d like to quantify this variability to understand how much uncertainty there is in our estimate.</p>
<p>The problem is that we only have one sample. As a thought experiment however, we can imagine running our data collection process many times, each time collecting a sample of the same size from the same population. Then, we could calculate the estimate we’re interested in – here, the mean cholesterol level in U.S. adults – for each of these samples, and look at the distribution of these estimates. This distribution of estimates is called the <strong>sampling distribution</strong> of the estimate, and the shape of the sampling distribution tells us about the uncertainty in our estimate.</p>
<p>This thought experiment is where the bootstrap technique comes in. The bootstrap helps us understand how much our estimates might vary if we had collected different samples from the same population. To do this, we use the following procedure:</p>
<ol class="arabic simple">
<li><p>We treat our sample as if it represents the whole population</p></li>
<li><p>We create many new <strong>bootstrap samples</strong> by randomly selecting from our data <strong>with replacement</strong> (e.g. the same observation can be selected multiple times)</p></li>
<li><p>For each bootstrap sample, we calculate our estimate of interest (e.g. the mean cholesterol level)</p></li>
<li><p>By looking at how this estimate varies across our bootstrap samples, we can estimate our uncertainty.</p></li>
</ol>
<p>As long as we generate enough bootstrap samples (which we can easily do with our modern simulation tools and computing power), the bootstrap sampling distribution will give us a good approximation of the true sampling distribution of the estimate. Let’s begin by taking a look at the estimated expectation of cholesterol in our sample:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average cholesterol in our sample: </span><span class="si">{</span><span class="n">cholesterol_df</span><span class="p">[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> mg/dL&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Average cholesterol in our sample: 186.9 mg/dL
</pre></div>
</div>
</div>
</div>
<p>Next, we’ll implement step 2 of the bootstrap technique above. Pandas has a convenient <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sample.html">df.sample method</a> that we can use to generate bootstrap samples.</p>
<p>The following call will generate a single bootstrap sample of a dataframe:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># frac=1 means we&#39;re generating a sample of the same size as the original dataframe</span>
<span class="c1"># replace=True means we&#39;re sampling with replacement</span>
<span class="n">bootstrap_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>2.1.</strong> Complete the function below that generates bootstrap samples of a dataframe, returning them as a list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_bootstrap_dfs</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">n_bootstraps</span><span class="o">=</span><span class="mi">5000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Bootstraps the dataframe `n_bootstraps` times, where each bootstrap sample is the same number of rows as the original dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pd.DataFrame): the dataframe to bootstrap</span>
<span class="sd">        n_bootstraps (int): the number of bootstraps to generate</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[pd.DataFrame]: a list of bootstrapped dataframes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bootstrap_dfs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_bootstraps</span><span class="p">):</span>
        <span class="n">bootstrap_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">bootstrap_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bootstrap_df</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bootstrap_dfs</span>

<span class="c1"># Create a simple dataframe to test</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;review_scores&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> 
                   <span class="s1">&#39;review_text&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;I liked it&#39;</span><span class="p">,</span> <span class="s1">&#39;It was awful&#39;</span><span class="p">,</span> <span class="s1">&#39;Bland&#39;</span><span class="p">,</span> <span class="s1">&#39;Pretty good&#39;</span><span class="p">]})</span>

<span class="n">bootstrap_dfs</span> <span class="o">=</span> <span class="n">generate_bootstrap_dfs</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">bootstrap_dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="s2">&quot;Each bootstrap sample should be the same size as the original dataframe&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate 5000 bootstrap samples of the cholesterol dataframe, may take 10-15 seconds to run</span>
<span class="n">bootstrap_cholesterol_dfs</span> <span class="o">=</span> <span class="n">generate_bootstrap_dfs</span><span class="p">(</span><span class="n">cholesterol_df</span><span class="p">,</span> <span class="n">n_bootstraps</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2.2.</strong> Next, we’ll perform step 3 of the bootstrap technique above, calculating the estimated expectation (mean) cholesterol level for each bootstrap sample:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_bootstrap_means</span><span class="p">(</span><span class="n">bootstrap_dfs</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the mean of a column for each bootstrap sample in a list of dataframes.</span>

<span class="sd">    Args:</span>
<span class="sd">        bootstrap_dfs (list[pd.DataFrame]): a list of bootstrapped dataframes</span>
<span class="sd">        column (str): the column to calculate the mean of</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[float]: a list of means (estimated expectations)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bootstrap_means</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">bootstrap_df</span> <span class="ow">in</span> <span class="n">bootstrap_dfs</span><span class="p">:</span>
        <span class="n">bootstrap_means</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bootstrap_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">bootstrap_means</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bootstrap_cholesterol_means</span> <span class="o">=</span> <span class="n">generate_bootstrap_means</span><span class="p">(</span><span class="n">bootstrap_cholesterol_dfs</span><span class="p">,</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can then visualize the shape of our bootstrap sampling distribution. Create a <code class="docutils literal notranslate"><span class="pre">sns.histplot</span></code> of the bootstrap means below, where the <code class="docutils literal notranslate"><span class="pre">x</span></code> parameter is the list of bootstrap means and the <code class="docutils literal notranslate"><span class="pre">kde</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to visualize the shape of the distribution:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Bootstrap Means&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bootstrap sampling distribution&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c429a784409894a7cd2e12c66e102f79348ceb2e6fd89d3c67fe0c1d0a5d881a.png" src="../_images/c429a784409894a7cd2e12c66e102f79348ceb2e6fd89d3c67fe0c1d0a5d881a.png" />
</div>
</div>
<p>You’ll notice that the sampling distribution is approximately bell-shaped (Normal distribution), which is a property of the bootstrap sampling distribution when the original sample is large and representative of the population. This then allows us to use the bootstrap sampling distribution to understand how much uncertainty there is in our estimate of average cholesterol level in the U.S. adult population. We can do this visually by inspecting the spread of the distribution above, and we can also quantify this by computing <strong>confidence intervals</strong> on our estimate.</p>
<p>You will typically see 95% confidence intervals reported in research papers. The 95% confidence interval tells us that if we repeated our sampling process many times and computed a 95% confidence interval each time, 95% of those intervals would contain the true population average cholesterol level.</p>
<p><strong>2.3</strong>. To compute the 95% confidence interval, we can take the 2.5th and 97.5th percentiles of the bootstrap sampling distribution via <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.percentile.html">np.percentile</a>. Determine the 2.5th and 97.5th percentiles of the bootstrap cholesterol means below, using the <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">q</span></code> parameters of <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: the percentile function takes percentiles in the range [0, 100], not fractions</span>
<span class="n">lower_ci</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="n">upper_ci</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="mf">97.5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average cholesterol level in U.S. adults: </span><span class="si">{</span><span class="n">cholesterol_df</span><span class="p">[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> mg/dL&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;95% Confidence Interval: [</span><span class="si">{</span><span class="n">lower_ci</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">upper_ci</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">] mg/dL&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Average cholesterol level in U.S. adults: 186.9 mg/dL
95% Confidence Interval: [185.7, 188.0] mg/dL
</pre></div>
</div>
</div>
</div>
<p>The narrower the confidence interval, the more precise our estimate is (decreased uncertainty and variance). One secondary goal we have when designing and analyzing studies is to make our estimates as precise as possible. The most straightforward way to do this is to increase our sample size – but collecting more data is not often not practical! We’ll explore how sample size affects the precision of our estimates in the next section.</p>
<div class="note admonition">
<p class="admonition-title">Takeaways</p>
<p>The bootstrap is a powerful technique that helps us understand uncertainty in our estimates by simulating what would happen if we could collect many different samples from the population:</p>
<ul class="simple">
<li><p>Instead of collecting new samples (which is often not possible), we create new samples by resampling from our existing data</p></li>
<li><p>By looking at how our estimates vary across these bootstrap samples, we can understand how much uncertainty exists in our original estimate</p></li>
<li><p>This gives us practical tools like confidence intervals without requiring complex mathematical derivations</p></li>
<li><p>The wider the range of values we see in our bootstrap samples, the more uncertainty we have in our estimate</p></li>
</ul>
<p>This is just a high-level overview of the bootstrap for the purposes of this course, and we’ve skipped over many theoretical properties and details. If you’re interested in learning more, let me know and I can recommend some resources!</p>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="adding-interactivity-1-pt">
<h1>3. Adding interactivity [1 pt]<a class="headerlink" href="#adding-interactivity-1-pt" title="Link to this heading">#</a></h1>
<p>In this section, we’ll learn how to make our visualizations interactive using <code class="docutils literal notranslate"><span class="pre">ipywidgets</span></code>. These dynamic widgets can help us build intuition about how different parameters affect our analysis.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ipywidgets</span></code> library functionality is extensive, but for our visualizations it will be sufficient for us to use the <code class="docutils literal notranslate"><span class="pre">interact</span></code>/<code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> decorators to add interactivity without too much extra code. Read about the interact functionality below, focusing on the first three sections: “Basic <code class="docutils literal notranslate"><span class="pre">interact</span></code>,” “Fixing arguments using <code class="docutils literal notranslate"><span class="pre">fixed</span></code>”, and “Widget abbreviations”.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ipywidgets.readthedocs.io/en/stable/examples/Using%20Interact.html">Using Interact</a></p></li>
</ul>
<div class="note admonition">
<p class="admonition-title">Reading Notes</p>
<ul class="simple">
<li><p>I suggest reading the “Basic <code class="docutils literal notranslate"><span class="pre">interact</span></code>,” “Fixing arguments using <code class="docutils literal notranslate"><span class="pre">fixed</span></code>”, and “Widget abbreviations” sections, and leaving the rest for reference as they contain extra functionality that aren’t as relevant to our purposes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> behaves the exact same way as <code class="docutils literal notranslate"><span class="pre">interact</span></code>, except that it requires the user to manually update the widget value by clicking on it. In all the examples below, we’ll use <code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> so that the widget values are not updated automatically as we change the parameters.</p></li>
<li><p>The most concise usage of <code class="docutils literal notranslate"><span class="pre">interact</span></code>/<code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> is to use them as decorators, which will automatically create a widget for each parameter in the function. You can read more about Python decorators at <a class="reference external" href="https://www.learnpython.org/en/Decorators">this link</a>, but for our purposes it is sufficient to know that we can use them to add interactivity to our functions by mirroring the parameter names in our plotting functions.</p></li>
</ul>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># standard imports for ipywidgets</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">interact</span><span class="p">,</span> <span class="n">interact_manual</span><span class="p">,</span> <span class="n">fixed</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s now use the <code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> decorator to add interactivity to our bootstrap exploration. The parameters passed to the decorator will provide a dropdown menu for each parameter in the function in the widget, which you can see in the examplewidget below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate a list of sample fractions to use for the dropdown menu</span>
<span class="n">sample_fracs</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>

<span class="c1"># the parameter name in the function is the same as the parameter name in the decorator</span>
<span class="nd">@interact_manual</span><span class="p">(</span><span class="n">sample_frac</span><span class="o">=</span><span class="n">sample_fracs</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_subsample_mean</span><span class="p">(</span><span class="n">sample_frac</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating mean cholesterol of a random subsample of </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">sample_frac</span><span class="o">*</span><span class="n">cholesterol_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2"> people&quot;</span><span class="p">)</span>

    <span class="n">subsample</span> <span class="o">=</span> <span class="n">cholesterol_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">sample_frac</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average cholesterol level in U.S. adults: </span><span class="si">{</span><span class="n">subsample</span><span class="p">[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> mg/dL&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "08905a7e32324999bc983c64ef9a66b6"}</script></div>
</div>
<p><strong>3.1</strong> Complete the function below that displays the bootstrap sampling distribution of cholesterol levels for a given sample fraction. How does the spread of the sampling distribution change as we change the sample size? Do our estimates become more or less precise as we increase the sample size?</p>
<p><strong>Your Response</strong>: Larger sample sizes lead to more precise estimates – generally, there is a tradeoff between the amount of data we can feasibly collect and the precision of our estimates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@interact_manual</span><span class="p">(</span><span class="n">sample_frac</span><span class="o">=</span><span class="n">sample_fracs</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plot_bootstrap_sampling_distribution</span><span class="p">(</span><span class="n">sample_frac</span><span class="p">):</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating mean cholesterol from a subsample of </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">sample_frac</span><span class="o">*</span><span class="n">cholesterol_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2"> people&quot;</span><span class="p">)</span>

    <span class="c1"># subsample the cholesterol dataframe</span>
    <span class="n">subsample_df</span> <span class="o">=</span> <span class="n">cholesterol_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">sample_frac</span><span class="p">)</span>

    <span class="c1"># generate bootstrap samples from the subsampled dataframe</span>
    <span class="c1"># NOTE: you can use n_bootstraps=1000 to speed up the simulation</span>
    <span class="n">bootstrap_dfs</span> <span class="o">=</span> <span class="n">generate_bootstrap_dfs</span><span class="p">(</span><span class="n">subsample_df</span><span class="p">,</span> <span class="n">n_bootstraps</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

    <span class="c1"># calculate the bootstrap means</span>
    <span class="n">bootstrap_cholesterol_means</span> <span class="o">=</span> <span class="n">generate_bootstrap_means</span><span class="p">(</span><span class="n">bootstrap_dfs</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">)</span>

    <span class="c1"># Print the subsample mean and confidence interval</span>
    <span class="n">lower_ci</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
    <span class="n">upper_ci</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="mf">97.5</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average cholesterol level in U.S. adults: </span><span class="si">{</span><span class="n">subsample_df</span><span class="p">[</span><span class="s1">&#39;TotalCholesterolMgdl&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> mg/dL&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;95% Confidence Interval: [</span><span class="si">{</span><span class="n">lower_ci</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">upper_ci</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">] mg/dL&quot;</span><span class="p">)</span>

    <span class="c1"># plot the bootstrap sampling distribution using sns.histplot</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">bootstrap_cholesterol_means</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Mean Cholesterol (mg/dL)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Bootstrap Sampling Distribution of Mean Cholesterol&quot;</span><span class="p">)</span>
    
    <span class="c1"># NOTE: this fixes the x-axis limits to be the same for all plots, making it easier to compare</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">182</span><span class="p">,</span> <span class="mi">192</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "41c96694830f4798bba062db2b88c84a"}</script></div>
</div>
<p><strong>3.2.</strong> Next, let’s add interactivity to one of the gapminder plots we created earlier. Select one of the plots we created in question 1 and add interactivity with two parameters to your widget:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sns.scatterplot</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sns.lineplot</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sns.histplot</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sns.kdeplot</span></code></p></li>
</ul>
<p>Some suggested parameters for <code class="docutils literal notranslate"><span class="pre">interact_manual</span></code> are listed given below as well. Describe your choices for the parameters and state a <strong>descriptive</strong> question that your widget can help answer. For example, “How does the relationship between GDP and life expectancy vary across the two selected countries in the year 2007?”</p>
<p><strong>Your Response</strong>: Varies, but the example below explores how life expectancy varies across different continents in the year 2007.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">continents</span> <span class="o">=</span> <span class="n">gapminder_df</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="nd">@interact_manual</span><span class="p">(</span><span class="n">param1</span><span class="o">=</span><span class="n">continents</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">interactive_gapminder_plot</span><span class="p">(</span><span class="n">param1</span><span class="p">):</span>
    <span class="c1"># Filtering data</span>
    <span class="n">gapminder_2007</span> <span class="o">=</span> <span class="n">gapminder_df</span><span class="p">[(</span><span class="n">gapminder_df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2007</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">gapminder_df</span><span class="p">[</span><span class="s2">&quot;continent&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">param1</span><span class="p">)]</span>
    
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">gapminder_2007</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Life Expectancy Across Countries in </span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2"> in 2007&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Life Expectancy (years)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "cd378644a0f348a0a21a546db33a542c"}</script></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="causal-roadmap-cintron-et-al-2021-1-pt">
<h1>4. Causal roadmap: Cintron et al. 2021 [1 pt]<a class="headerlink" href="#causal-roadmap-cintron-et-al-2021-1-pt" title="Link to this heading">#</a></h1>
<p>Read <a class="reference external" href="https://www.evidenceforaction.org/roadmap-causal-inference">“A Roadmap for Causal Inference” by Cintron et al. 2021</a> and answer the following questions:</p>
<div class="admonition-reading-notes admonition">
<p class="admonition-title">Reading notes</p>
<ul class="simple">
<li><p>Note on how the steps of the causal roadmap are broken out a bit more granularly than we’ve been discussing in class:</p>
<ul>
<li><p>Their steps 1-2 are our “prior knowledge” step</p></li>
<li><p>Their step 3 is our “question” step</p></li>
<li><p>Their steps 4-5 are our “design” step</p></li>
</ul>
</li>
<li><p>The key identification statement is at the end of step 1:</p></li>
</ul>
<blockquote>
<div><p>A critical component of the assumed causal model is that neighborhoods receiving greening were selected effectively randomly from among those that were eligible for the program; eligibility was determined by the average income of neighborhood residents; and receiving greening was otherwise unrelated to characteristics of neighborhood residents.</p>
</div></blockquote>
<ul class="simple">
<li><p>For a more technical walkthrough of the Causal Roadmap, see <a class="reference external" href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4077670/">Petersen and van der Laan 2015: Causal Models and Learning from Data</a></p></li>
</ul>
</div>
<p><strong>4.1.</strong> State what the measured treatment <span class="math notranslate nohighlight">\(T\)</span> and outcome <span class="math notranslate nohighlight">\(Y\)</span> are in the study – be as specific as possible.</p>
<p><strong>Your Response</strong>: The treatment is the level of greenness in a census block. The greening intervention was measured as a block that was in the lowest tertile in 2010 and the highest tertile in 2016. The outcome is the CVD risk ratio in the measured neighborhoods.</p>
<p><strong>4.2</strong> Draw the causal graph that was detailed step 1 of the Causal Roadmap, with two of the their listed potential confounders present.</p>
<p><strong>Your Response</strong>: Varies, but we examined an example DAG for the two confounders in Activity 4.</p>
<div class="tip admonition">
<p class="admonition-title">Submission note</p>
<p>For this question, you can either hand-draw the graph on paper and submit a photo or use an online tool of your choice. Please make sure the image is submitted as a separate file on Gradescope.</p>
</div>
<p><strong>4.3</strong> Are there any potential confounders (either in the authors’ list or ones you can think of) that may be difficult to measure?</p>
<p><strong>Your Response</strong>: Varies, but everyone had good discussions on ethnicity, crime, and pollution (to name a few) which all can be difficult to measure in the context of this study.</p>
<p><strong>4.4</strong> Looking towards the interpretation of the greenery study, what population would the results be applicable to? E.g. would it be generalizable to all neighborhoods in the United States, or would it be a more specific subset?</p>
<p><strong>Your Response</strong>: Varies, but the results would be most applicable to low income neighborhoods in the Miami-Dade County. There would be some generalizability concerns to other neighborhoods in the United States, particularly those that look different demographically compared to Miami-Dade County. An open question in causal inference is how much causal effects measured “transfers” to other populations.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="reflection-0-5-pts">
<h1>5. Reflection [0.5 pts]<a class="headerlink" href="#reflection-0-5-pts" title="Link to this heading">#</a></h1>
<p><strong>5.1</strong> How much time outside of class did it take you to complete this worksheet?</p>
<p><strong>Your Response</strong>: Varies</p>
<p><strong>5.2</strong> What is one thing you have a better understanding of after completing this worksheet? This could be about the concepts, the reading, or the code.</p>
<p><strong>Your Response</strong>: Varies</p>
<p><strong>5.3</strong> What questions or points of confusion do you have about the material covered in this worksheet?</p>
<p><strong>Your Response</strong>: Varies</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="acknowledgements">
<h1>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Free data from World Bank via <a class="reference external" href="http://Gapminder.org">Gapminder.org</a>, <a class="reference external" href="https://www.gapminder.org/free-material/">CC-BY-4.0 license</a>. Read more at <a class="reference external" href="https://www.gapminder.org/data/">https://www.gapminder.org/data/</a></p></li>
<li><p>Gapminder data cleaned and organized via the <a class="reference external" href="https://github.com/causaldata">causaldata</a> package, produced by Nick Huntington-Klein.</p></li>
<li><p>Intuition for explaining the bootstrap from Zach Duey’s blog post, <a class="reference external" href="https://zduey.github.io/posts/applying-nonparametric-bootstrap.html">Applying Nonparametric Bootstrap</a></p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./worksheets"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ws2_solution.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">WS 2 Solution 🐼</p>
      </div>
    </a>
    <a class="right-next"
       href="ws4_solution.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">WS 4 Solution 📈</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">WS 3 Solution 📊</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#seaborn-and-matplotlib-1-5-pts">1. Seaborn and Matplotlib [1.5 pts]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-bootstrap-technique-1-pt">2. The bootstrap technique [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-interactivity-1-pt">3. Adding interactivity [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#causal-roadmap-cintron-et-al-2021-1-pt">4. Causal roadmap: Cintron et al. 2021 [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-0-5-pts">5. Reflection [0.5 pts]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#acknowledgements">Acknowledgements</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
  Causal Inference for Data Science is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>