
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WS 1 Solution üé≤ &#8212; COMSC341-CD: Causal Inference for Data Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=a37d84e8" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'worksheets/ws1_solution';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="WS 2 Solution üêº" href="ws2_solution.html" />
    <link rel="prev" title="Worksheet 4 üìà" href="ws4.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">COMSC341-CD: Causal Inference for Data Science</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Causal Inference for Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Syllabus</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus/values.html">Goals and Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/policies.html">Course Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/schedule.html">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syllabus/office_hours.html">Office Hours</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources/submit.html">How to Run and Submit</a></li>


<li class="toctree-l1"><a class="reference internal" href="../resources/catalog.html">Causal Catalog</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ws1.html">Worksheet 1 üé≤</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws2.html">Worksheet 2 üêº</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws3.html">Worksheet 3 üìä</a></li>







<li class="toctree-l1"><a class="reference internal" href="ws4.html">Worksheet 4 üìà</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheet Solutions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">WS 1 Solution üé≤</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws2_solution.html">WS 2 Solution üêº</a></li>






<li class="toctree-l1"><a class="reference internal" href="ws3_solution.html">WS 3 Solution üìä</a></li>







<li class="toctree-l1"><a class="reference internal" href="ws4_solution.html">WS 4 Solution üìà</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projects/proj1.html">Project 1 üë∂</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/proj2.html">Project 2 üë•</a></li>

<li class="toctree-l1"><a class="reference internal" href="../projects/final_project.html">Final Project üåç</a></li>





</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://comsc341cd-hub-sp.mtholyoke.edu/hub/user-redirect/git-pull?repo=https%3A//github.com/comsc341cd/comsc341cd.github.io&urlpath=tree/comsc341cd.github.io/worksheets/ws1_solution.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on JupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterHub logo" src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/worksheets/ws1_solution.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>WS 1 Solution üé≤</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">WS 1 Solution üé≤</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#course-resources-and-skills-check-1-pt">1. Course resources and skills check [1 pt]</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-interface">Coding interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#math">Math</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#probability-concepts-1-pt">2. Probability concepts [1 pt]</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chance-events">Chance events</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expectation">Expectation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-a-random-variable-and-probability-distributions">Simulating a random variable and probability distributions</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#estimating-a-conditional-expectation-1-pt">3. Estimating a conditional expectation [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hernan-et-al-2019-reading-1-pt">4. Hern√°n et al. 2019 reading [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-1-pt">5. Reflection [1 pt]</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ws-1-solution">
<h1>WS 1 Solution üé≤<a class="headerlink" href="#ws-1-solution" title="Link to this heading">#</a></h1>
<blockquote class="epigraph">
<div><p>Getting Started and Probability Primer</p>
<p class="attribution">‚ÄîTODO your name here</p>
</div></blockquote>
<div class="admonition-collaboration-statement admonition">
<p class="admonition-title">Collaboration Statement</p>
<ul class="simple">
<li><p>TODO brief statement on the nature of your collaboration.</p></li>
<li><p>TODO your collaborator‚Äôs names here.</p></li>
</ul>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="learning-objectives">
<h1>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Get familiarized with the Jupyterhub interface and the course‚Äôs submission system.</p></li>
<li><p>Learn where to find course resources.</p></li>
<li><p>Practice with the first probability and math concepts needed for the course:</p>
<ul>
<li><p>random variables</p></li>
<li><p>expectation</p></li>
<li><p>conditional expectation</p></li>
</ul>
</li>
<li><p>Practice with basic usage of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> throughout.</p></li>
<li><p>Read a research article and learn about the classification of different data science tasks.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="course-resources-and-skills-check-1-pt">
<h1>1. Course resources and skills check [1 pt]<a class="headerlink" href="#course-resources-and-skills-check-1-pt" title="Link to this heading">#</a></h1>
<p><strong>1.1:</strong> Read through all the pages listed in the syllabus on the <a class="reference external" href="https://comsc341cd.github.io/">course website</a>. Out of the five different academic perspectives listed with the reference textbooks on the course policies page, which one are you most interested in or would be most useful to you? Briefly comment on why.</p>
<p><strong>Your Response</strong>: Varies</p>
<p><strong>1.2</strong> Reply to the Course Intros thread on Ed introducing yourself and sharing why you‚Äôre interested in taking this course.</p>
<p>TODO post to the Ed discussion thread: <a class="reference external" href="https://edstem.org/us/courses/71545/discussion">https://edstem.org/us/courses/71545/discussion</a></p>
<section id="coding-interface">
<h2>Coding interface<a class="headerlink" href="#coding-interface" title="Link to this heading">#</a></h2>
<p><strong>Programming language: Python.</strong> This course will be taught in Python. To get the most out of the course, it‚Äôs important you don‚Äôt feel bogged down by the syntax of the language so that you can focus on the concepts introduced. If you do not have prior experience with Python, that‚Äôs no problem. <strong>Please do take the time at start of the course to study and practice it.</strong></p>
<p>For review, I recommend going through an online Python tutorial such as this one: <a class="reference external" href="https://www.learnpython.org/">https://www.learnpython.org/</a>, and going through all the section under ‚ÄúLearn the Basics.‚Äù I will also provide pointers to the relevant ‚ÄúAdvanced Tutorial‚Äù sections as we utilize them in the course.</p>
<p><strong>Libraries.</strong> We will be using a typical data science stack throughout the course:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/">numpy</a> + <a class="reference external" href="https://scipy.org/">scipy</a>: for scientific computing</p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/">pandas</a>: for data table manipulation and analysis</p></li>
<li><p><a class="reference external" href="https://seaborn.pydata.org/">seaborn</a> + <a class="reference external" href="https://matplotlib.org/">matplotlib</a>: for figure visualization</p></li>
<li><p><a class="reference external" href="https://ipywidgets.readthedocs.io/en/latest/">ipywidgets</a>: for interactive widgets</p></li>
</ul>
<p>We will introduce the functionality of these libraries as we need them in the course, so we do not assume prior knowledge of these libraries. However, I do encourage you to refer to the documentation for all of them, as they are extensive and well-written.</p>
<p><strong>1.3.</strong> We‚Äôll begin with some basic numpy operations in this worksheet. Complete the TODOs below.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>First, try to guess what the code does. Then, run the code and see if you were correct. Finally, check the documentation if you want to learn more about the function.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The standard way to import numpy  </span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>Briefly describe what the code below does:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Your Response</strong>: np.arange(1,7) creates an array of integers from 1 to 6 ‚Äì the 7 is excluded.</p>
<p>Briefly describe what the code below does:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Your Response</strong>: np.ones(6) creates an array of 6 ones, specifically of shape <code class="docutils literal notranslate"><span class="pre">(6,)</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The standard way to import numpy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># TODO experiment with code in this cell</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Not sure how a function call works? Play and experiment with it in a code cell!</p>
</div>
<p><strong>Computing environment.</strong> We will be using Jupyter notebooks (.ipynb files) for all assignments. We have a centralized Jupyterhub server which provides a uniform environment for everyone, and you can access it anywhere on campus using your MHC credentials:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://comsc341cd-hub-sp.mtholyoke.edu">https://comsc341cd-hub-sp.mtholyoke.edu</a></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you would like to run your code locally, you are welcome to do so and we can provide the necessary list of installation packages. However, we note that we unfortunately cannot help troubleshoot issues with your local environment. In particular, some of the scientific computing libraries can be finnicky to install on ARM-based Macs, which is why we have centralized our Jupyterhub server.</p>
</div>
<p>There are two types of cells in a Jupyter notebook:</p>
<ul class="simple">
<li><p>Markdown cells: for writing text</p></li>
<li><p>Code cells: for writing and running code</p></li>
</ul>
<p>Read through <a class="reference external" href="https://gtribello.github.io/mathNET/assets/notebook-writing.html">this guide</a> to learn how to format markdown cells with mathematical notation. We will be using both markdown and latex in this course.</p>
</section>
<section id="math">
<h2>Math<a class="headerlink" href="#math" title="Link to this heading">#</a></h2>
<p>We will be using mathematical notation to formalize many concepts in this course. To begin, this worksheet will be using the notation for sums:</p>
<div class="math notranslate nohighlight">
\[
\sum_{i=1}^{n} X_i = X_1 + X_2 + X_3 + \cdots + X_n
\]</div>
<p>You may also see only a subscript underneath the summation symbol, which means the sum is over all the elements in the set. For example, the sum of all elements in the set <span class="math notranslate nohighlight">\(A=\{1,2,3\}\)</span> is written as:</p>
<div class="math notranslate nohighlight">
\[
\sum_{x \in A} x = 1 + 2 + 3 = 6
\]</div>
<p>We‚Äôll also be using the indicator function <span class="math notranslate nohighlight">\(\mathbb{I}(\text{condition})\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbb{I}(\text{condition}) = 
\begin{cases} 
1 &amp; \text{if condition is true} \\
0 &amp; \text{if condition is false}
\end{cases}
\end{split}\]</div>
<p>For example, <span class="math notranslate nohighlight">\(\mathbb{I}(X = x)\)</span> will be 1 if <span class="math notranslate nohighlight">\(X = x\)</span> and 0 otherwise.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="probability-concepts-1-pt">
<h1>2. Probability concepts [1 pt]<a class="headerlink" href="#probability-concepts-1-pt" title="Link to this heading">#</a></h1>
<section id="chance-events">
<h2>Chance events<a class="headerlink" href="#chance-events" title="Link to this heading">#</a></h2>
<p>Probability is the mathematical framework that allows us to reason about randomness and chance.</p>
<p>Read <a class="reference external" href="https://seeing-theory.brown.edu/basic-probability/"><strong>Ch 1 of Seeing Theory: Chance events</strong></a> for a brief refresher on random events.</p>
<div class="admonition-reading-notes admonition">
<p class="admonition-title">Reading notes</p>
<p>I will be adding notes to supplement the reading when necessary.</p>
<p>To fill in some notation of the seeing theory section:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(P(A)\)</span> is the probability of event <span class="math notranslate nohighlight">\(A\)</span> happening. In the reading, we are examining the probability of a fair coin coming up heads or tails.</p></li>
<li><p>A fair coin has equal probability of landing heads or tails, so <span class="math notranslate nohighlight">\(P(\text{heads}) = 0.5\)</span> and <span class="math notranslate nohighlight">\(P(\text{tails}) = 0.5\)</span>.</p></li>
<li><p>If we assign heads and tails to be numeric outcomes, e.g. <span class="math notranslate nohighlight">\(\text{heads} = 1\)</span> and <span class="math notranslate nohighlight">\(\text{tails} = 0\)</span>, then the coin flip can be thought of as a <strong>random variable</strong>, which we often denote as a capital letter <span class="math notranslate nohighlight">\(X\)</span>.</p></li>
<li><p>In order for something to be considered a valid (discrete) random variable, the probability of each event must be between 0 and 1, and the sum of the probabilities of all events must equal 1. In the case of a fair coin, <span class="math notranslate nohighlight">\(P(X=1) + P(X=0) = 0.5 + 0.5 = 1\)</span>.</p></li>
<li><p>We can think of a random variable as a random number generator that can be repeated many times, generating a <strong>sample</strong> of outcomes. These will be subscripted, e.g. a sample of <span class="math notranslate nohighlight">\(N\)</span> coin flips will be <span class="math notranslate nohighlight">\(X_1, X_2, X_3, \cdots, X_N\)</span>.</p></li>
<li><p>The observed outcomes of a random variable do not necessarily match the true probability of the outcomes. If you click ‚ÄúFlip the coin‚Äù a couple of times, you‚Äôll see that you don‚Äôt always get 50% heads and 50% tails.</p></li>
<li><p>It is only in the long run that the observed outcomes match the true probability of the process, which you can see if you click ‚ÄúFlip 100 times‚Äù.</p></li>
</ul>
</div>
</section>
<section id="expectation">
<h2>Expectation<a class="headerlink" href="#expectation" title="Link to this heading">#</a></h2>
<p>Expectation provides a measure of the ‚Äúcenter‚Äù value of a random variable. Read <a class="reference external" href="https://seeing-theory.brown.edu/basic-probability/"><strong>Ch 1 of Seeing Theory: Expectation</strong></a>.</p>
<div class="admonition-reading-notes admonition">
<p class="admonition-title">Reading notes</p>
<ul class="simple">
<li><p>The reading uses <span class="math notranslate nohighlight">\(\mathcal{X}\)</span> to denote the set of all possible values that a random variable can take. In the case of a fair six-sided die roll, <span class="math notranslate nohighlight">\(\mathcal{X} = \{1, 2, 3, 4, 5, 6\}\)</span>.</p></li>
<li><p>Thus the summation over <span class="math notranslate nohighlight">\(x \in \mathcal{X}\)</span> is summing over all possible values that the random variable can take.</p></li>
</ul>
</div>
<p>Let‚Äôs now numerically compute the expected value of a roll of a fair 6-sided die. If the six-sided die is fair, then each of the outcomes has equal probability of 1/6. Run the following code to compute the expected value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># np.arange(1, 7) creates an np.array of the integers from 1 to 6</span>
<span class="n">die_outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

<span class="c1"># np.ones(6) creates an np.array of 6 ones, then dividing by 6 scales each element to 1/6</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">/</span> <span class="mi">6</span>  

<span class="c1"># If we multiply two np.arrays that have the same length, </span>
<span class="c1"># the result will be an np.array of the element-wise products</span>
<span class="n">expected_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">die_outcomes</span> <span class="o">*</span> <span class="n">probabilities</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The expected value of a fair die roll is: </span><span class="si">{</span><span class="n">expected_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The expected value of a fair die roll is: 3.5
</pre></div>
</div>
</div>
</div>
<p>Let‚Äôs now compute the expected value of a roll of a fair 6-sided die where each outcome has a different probability. In the Seeing Theory widget, drag the slider for the true probability of 6 to 0.5. The probability of the other outcomes should change to 0.1 each to keep the sum of the probabilities at 1:</p>
<p><img alt="" src="../_images/ws2_unfair_dice.png" /></p>
<p><strong>2.1.</strong> Write code to compute the expected value of this new distribution of probabilities. You can use the code from above as a template:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO your code here</span>
<span class="c1">### BEGIN SOLUTION </span>
<span class="n">die_outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">expected_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">die_outcomes</span> <span class="o">*</span> <span class="n">probabilities</span><span class="p">)</span>
<span class="c1">### END SOLUTION</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The expected value of the modified die roll is: </span><span class="si">{</span><span class="n">expected_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The expected value of the modified die roll is: 4.5
</pre></div>
</div>
</div>
</div>
<p>Now try simulating the dice rolls, by clicking ‚ÄúRoll 100 times‚Äù multiple times in the Seeing Theory widget and see if your code matches the estimated expected value. What do you observe about the estimated expected value as the number of rolls increases?</p>
<p><strong>Your Response</strong>: As the number of rolls increases, the ‚Äúnoise‚Äù in the estimated expected value decreases, and the estimated expected value converges to the true expected value of 4.5.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The expected value of a binary random variable with outcomes <span class="math notranslate nohighlight">\(\{0, 1\}\)</span> is equivalent to the probability of the outcome being 1. For example, in our coin flip example, the expected value is the probability the coin comes up heads.</p>
</div>
</section>
<section id="simulating-a-random-variable-and-probability-distributions">
<h2>Simulating a random variable and probability distributions<a class="headerlink" href="#simulating-a-random-variable-and-probability-distributions" title="Link to this heading">#</a></h2>
<p>A probability distribution describes how likely each possible value of the random variable is. You can think of a random variable as the ‚Äúwhat‚Äù (what values can occur) and the probability distribution as the ‚Äúhow likely‚Äù (how likely each value is to occur).</p>
<p>For example, when we roll a die, the random variable is the number that comes up (1-6), while the probability distribution tells us that each number has a 1/6 chance of occurring. The same random variable could have different probability distributions - for instance, if the die was weighted to favor certain numbers.</p>
<p>There are many types of probability distributions, but here we will begin with the <strong>categorical distribution</strong> for modeling discrete random variables.</p>
<p>The categorical distribution is a discrete probability distribution where each outcome has a fixed probability of occurring.</p>
<p>In the coin flip and dice roll examples, we were looking at categorical distributions as there were a fixed number of outcomes: 2 for the coin flip, 6 for the dice roll. In the case where there are only 2 outcomes, the categorical distribution is known as the <strong>Bernoulli</strong> distribution.</p>
<p>Numpy has a built-in functionality to generate random numbers from a categorical distribution: <a class="reference external" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.choice.html">numpy.random.Generator.choice</a></p>
<p>For example, the following code generates <code class="docutils literal notranslate"><span class="pre">n_samples=1000</span></code> random numbers from a categorical distribution with 2 outcomes <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> and probabilities <code class="docutils literal notranslate"><span class="pre">p=[0.5,</span> <span class="pre">0.5]</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This creates a generator with a fixed seed, so we can generate the same random numbers</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">coin_flips</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">coin_flips</span></code> is an <code class="docutils literal notranslate"><span class="pre">np.array</span></code> of length <code class="docutils literal notranslate"><span class="pre">n_samples</span></code>, where each element is either 0 or 1.</p>
<p>If we represent heads as 1 and tails as 0, then we can count the number of heads that came up by summing up all the 1s in the <code class="docutils literal notranslate"><span class="pre">coin_flips</span></code> array, which should be close to 500:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_heads</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">coin_flips</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of heads: </span><span class="si">{</span><span class="n">n_heads</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of heads: 497
</pre></div>
</div>
</div>
</div>
<p>Once we have a sample of outcomes, we can <strong>estimate</strong> the expected value of the random variable by taking the mean of the sample. In a slight abuse of notation, we can denote the <strong>estimated expectation</strong> or <strong>sample mean</strong> as <span class="math notranslate nohighlight">\(\hat{E}[X]\)</span>, which averages over the <span class="math notranslate nohighlight">\(n\)</span> samples of the random variable <span class="math notranslate nohighlight">\(X\)</span>:</p>
<div class="math notranslate nohighlight">
\[
\hat{E}[X] = \frac{1}{n} \sum_{i=1}^{n} X_i
\]</div>
<div class="admonition-notation admonition">
<p class="admonition-title">Notation</p>
<p>I will be using the hat <span class="math notranslate nohighlight">\(\hat{\;}\)</span> notation throughout the course to denote an <strong>estimation</strong> of some quantity, which will always be computed from a sample of data.</p>
</div>
<p>We can then compute this <strong>estimated expectation</strong> of the random variable by using Numpy‚Äôs <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html">np.mean</a> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">estimated_expectation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">coin_flips</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated expectation of coin flips: </span><span class="si">{</span><span class="n">estimated_expectation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estimated expectation of coin flips: 0.497
</pre></div>
</div>
</div>
</div>
<p><strong>2.2.</strong> Let‚Äôs now compute the estimated expectation of rolling 1000 fair dice, and compare it to the true expected value we computed earlier. Use the code from above as a template for the outcomes and probabilities:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO your code here</span>

<span class="c1">### BEGIN SOLUTION</span>
<span class="n">dice_outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">dice_probabilities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">/</span> <span class="mi">6</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">dice_rolls</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">dice_outcomes</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">dice_probabilities</span><span class="p">)</span>

<span class="n">dice_estimated_expectation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dice_rolls</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated expectation of dice rolls: </span><span class="si">{</span><span class="n">dice_estimated_expectation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1">### END SOLUTION</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estimated expectation of dice rolls: 3.542
</pre></div>
</div>
</div>
</div>
<p>What is your estimate of the expected value of the dice roll?</p>
<p><strong>Your Response</strong>: 3.491</p>
<p>We often say that a random variable is <strong>distributed according to</strong> or ‚Äúfollows‚Äù a certain probability distribution. For example, we say that the random variable of a coin flip is distributed according to a Bernoulli distribution, and the random variable of a dice roll is distributed according to a categorical distribution.</p>
<p>You will often see probability distributions written in the following way:</p>
<div class="math notranslate nohighlight">
\[X \sim \text{Distribution}(\;)\]</div>
<p>Here, the capital letter <span class="math notranslate nohighlight">\(X\)</span> represents the random variable, and the tilde symbol <span class="math notranslate nohighlight">\(\sim\)</span> means ‚Äúis distributed according to‚Äù. The parentheses contain the parameters of the distribution. For example, the dice roll example we looked at earlier can be written as:</p>
<div class="math notranslate nohighlight">
\[X \sim \text{Categorical}(p)\]</div>
<p>Where <span class="math notranslate nohighlight">\(p=\{\frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}\}\)</span> is the probability of the dice outcomes <span class="math notranslate nohighlight">\(\mathcal{X} = \{1, 2, 3, 4, 5, 6\}\)</span>.</p>
<p>A special case of the categorical distribution is the <strong>Bernoulli</strong> distribution, which has only two outcomes <span class="math notranslate nohighlight">\(\{0, 1\}\)</span>:</p>
<div class="math notranslate nohighlight">
\[X \sim \text{Bernoulli}(p)\]</div>
<p>Where <span class="math notranslate nohighlight">\(p\)</span> is the probability of the outcome 1.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="estimating-a-conditional-expectation-1-pt">
<h1>3. Estimating a conditional expectation [1 pt]<a class="headerlink" href="#estimating-a-conditional-expectation-1-pt" title="Link to this heading">#</a></h1>
<p>A common task we will be doing in this course is estimating the expectation of a variable <strong>given</strong> some other condition. For example, we may observe the following sample <em>pairs</em>:</p>
<div class="math notranslate nohighlight">
\[
(X_1, Y_1), (X_2, Y_2), (X_3, Y_3), \cdots, (X_n, Y_n)
\]</div>
<p>where <span class="math notranslate nohighlight">\(X\)</span> is binary and <span class="math notranslate nohighlight">\(Y\)</span> takes on real values.</p>
<p>Run the cell below, which defines a <em>data generating process</em> that generates <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> pairs of <span class="math notranslate nohighlight">\((X, Y)\)</span> values. Note that it returns two arrays, <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code>, which are the same length.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">data_generating_process</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a sample of $n$ pairs of $(X, Y)$ values.</span>

<span class="sd">    Args:</span>
<span class="sd">        n_samples (int): The number of samples to generate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        X (np.array): An array of $n$ binary values.</span>
<span class="sd">        Y (np.array): An array of $n$ real values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate binary X values with equal probability of 0 and 1</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>

    <span class="c1"># Generate Y values based on the value of X using np.where</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">X</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> 
                 <span class="c1"># If X=1, generate from this distribution</span>
                 <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">/</span> <span class="mi">6</span><span class="p">),</span> 
                 <span class="c1"># If X=0, generate from this distribution</span>
                 <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span>

<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">data_generating_process</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can then ask a question: what is the estimated expected value of <span class="math notranslate nohighlight">\(Y\)</span>, <strong>given that</strong> <span class="math notranslate nohighlight">\(X=0\)</span>? This is known as a <strong>conditional expectation</strong>.</p>
<p>To express this mathematically, we can write:</p>
<div class="math notranslate nohighlight">
\[
\hat{E}[Y \mid X=0] = \frac{1}{n_0} \sum_{i=1}^{n} \mathbb{I}(X_i = 0)Y_i
\]</div>
<p>Where <span class="math notranslate nohighlight">\(n_0\)</span> is the number of times <span class="math notranslate nohighlight">\(X=0\)</span> in the sample, that is:</p>
<div class="math notranslate nohighlight">
\[
n_0 = \sum_{i=1}^{n} \mathbb{I}(X_i = 0)
\]</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When interpreting the above equation, we can read the vertical bar <span class="math notranslate nohighlight">\(\mid\)</span> as ‚Äúgiven that‚Äù.</p>
</div>
<p>We can compute the estimated conditional expectation of <span class="math notranslate nohighlight">\(Y\)</span> given <span class="math notranslate nohighlight">\(X=0\)</span> a couple of ways. First, we can translate the above equation literally:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># X == 0 returns an array of booleans, where an element is True if the corresponding element in X is 0</span>
<span class="c1"># np.sum then counts the number of True values in the array</span>
<span class="n">n0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">X</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># (X == 0) * Y is an element-wise multiplication of the two arrays</span>
<span class="n">conditional_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">X</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">Y</span><span class="p">)</span>

<span class="n">conditional_expectation</span> <span class="o">=</span> <span class="n">conditional_sum</span> <span class="o">/</span> <span class="n">n0</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated conditional expectation of Y given X=0: </span><span class="si">{</span><span class="n">conditional_expectation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estimated conditional expectation of Y given X=0: 4.526189524190324
</pre></div>
</div>
</div>
</div>
<p>We can also use numpy‚Äôs boolean indexing to filter out the values of <span class="math notranslate nohighlight">\(Y\)</span> where <span class="math notranslate nohighlight">\(X=0\)</span> and then take the mean:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter out the values of Y where X=0</span>
<span class="n">Y_given_X0</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="n">X</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># This will be the number of times X=0 in the sample</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Y_given_X0</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Take the mean of the filtered array</span>
<span class="n">conditional_expectation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Y_given_X0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated conditional expectation of Y given X=0: </span><span class="si">{</span><span class="n">conditional_expectation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(5002,)
Estimated conditional expectation of Y given X=0: 4.526189524190324
</pre></div>
</div>
</div>
</div>
<p><strong>3.1.</strong> Now, compute the estimated conditional expectation of <span class="math notranslate nohighlight">\(Y\)</span> given <span class="math notranslate nohighlight">\(X=1\)</span> with whichever method you prefer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO your code here</span>
<span class="c1">### BEGIN SOLUTION</span>
<span class="n">conditional_expectation_given_one</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">X</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated conditional expectation of Y given X=1: </span><span class="si">{</span><span class="n">conditional_expectation_given_one</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1">### END SOLUTION</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estimated conditional expectation of Y given X=1: 3.5054021608643455
</pre></div>
</div>
</div>
</div>
<p>What is your estimate of the conditional expectation of <span class="math notranslate nohighlight">\(Y\)</span> given <span class="math notranslate nohighlight">\(X=1\)</span>?</p>
<p><strong>Your Response</strong>: 3.505</p>
<p>If you read the <code class="docutils literal notranslate"><span class="pre">data_generating_process</span></code> function carefully, you may already have an idea of what the answer to these two conditional expectations are, without having to estimate them. The way that the data are generated is as follows:</p>
<ol class="arabic simple">
<li><p>Flip a fair coin</p></li>
<li><p>If the coin comes up heads, roll a fair 6-sided die</p></li>
<li><p>If the coin comes up tails, roll our weighted 6-sided die from earlier, with probabilities of events as follows:</p></li>
</ol>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Outcome</p></th>
<th class="head"><p>Probability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>0.5</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition-takeaway admonition">
<p class="admonition-title">Takeaway</p>
<p>The challenge in most real-world applications is that we don‚Äôt know the data generating process, and so we have to <strong>estimate</strong> quantities like the conditional expectation from a sample of data. Much of data-driven empirical research ‚Äì causal or non-causal ‚Äì is about estimating quantities (like the conditional expectation) that help describe some variable of interest.</p>
</div>
<p><strong>3.2.</strong> Let‚Äôs also practice translating mathematical statements into real-world expressions.</p>
<p>Suppose we have the following variable definitions:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(Y\)</span>: a high school student‚Äôs SAT score.</p></li>
<li><p><span class="math notranslate nohighlight">\(T\)</span>: a binary variable indicating a student‚Äôs participation in an after-school tutoring program: <span class="math notranslate nohighlight">\(T=1\)</span> if they participated, <span class="math notranslate nohighlight">\(T=0\)</span> otherwise.</p></li>
</ul>
<p>How would you state the following mathematical expression in words?</p>
<div class="math notranslate nohighlight">
\[
E[Y \mid T=1] 
\]</div>
<p><strong>Your response</strong>: The expected SAT score of students given that they participated in the tutoring program.</p>
<p>Consider another scenario:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(Y\)</span>: a binary variable indicating whether a person has lung cancer: <span class="math notranslate nohighlight">\(Y=1\)</span> if they have lung cancer, <span class="math notranslate nohighlight">\(Y=0\)</span> otherwise.</p></li>
<li><p><span class="math notranslate nohighlight">\(T\)</span>: a binary variable indicating whether a person smokes: <span class="math notranslate nohighlight">\(T=1\)</span> if they smoke, <span class="math notranslate nohighlight">\(T=0\)</span> if they don‚Äôt.</p></li>
</ul>
<p>How would you state the following mathematical expression in words?</p>
<div class="math notranslate nohighlight">
\[
E[Y \mid T=0] 
\]</div>
<p><strong>Your response</strong>: The probability a person has lung cancer given that they do not smoke.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We need to be careful in not imbuing any causal interpretation into the above expressions. We may have an idea of what the causal relationship between <span class="math notranslate nohighlight">\(T\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> is, but we cannot make any causal claims from the above expression alone ‚Äì it is purely an associational statement. The following reading will begin to explore how we can make causal claims from data.</p>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="hernan-et-al-2019-reading-1-pt">
<h1>4. Hern√°n et al. 2019 reading [1 pt]<a class="headerlink" href="#hernan-et-al-2019-reading-1-pt" title="Link to this heading">#</a></h1>
<p>One of the goals of this course is to connect the concepts we‚Äôve been learning to modern scientific discourse. To that end, we will periodically read and discuss research across causal inference. Our first reading is:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://content.sph.harvard.edu/wwwhsph/sites/1268/1268/20/hernan_chance19.pdf">Hern√°n et al. 2019. A second chance to get causal inference right: A classification of Data Science Tasks</a></p></li>
</ul>
<p>Read <strong>pages 42 - 45</strong> and <strong>Table 1</strong> in the article, and answer the following reflection questions:</p>
<p><strong>4.1</strong> What are the three scientific tasks of data science described in the article? Provide an example for each ‚Äì they can come from any field that you‚Äôre interested in.</p>
<p><strong>Your Response</strong>:</p>
<p>The three scientific tasks of data science described in the article are:</p>
<ul class="simple">
<li><p>Description: what percentage of low-income neighborhoods in Miami-Dade County have a high rate of greenery?</p></li>
<li><p>Prediction: what is the probability that a person will vote for a certain candidate in the next election given the past voting history and demographics? This is purely a ‚Äúmapping inputs to outputs‚Äù task.</p></li>
<li><p>Causal inference (counterfactual prediction): Does taking a new GLP-1 drug reduce the risk of type 2 diabetes?</p></li>
</ul>
<p><strong>4.2</strong> According to the authors, what distinguishes prediction tasks from causal inference tasks?</p>
<p><strong>Your Response</strong>: Causal inference tasks are distinguished from prediction tasks by the role of expert knowledge. Experts need to specify the question, identify/generate relevant data sources, and also describe the causal structure of the system under study. Causal knowledge, usually encoded in the form of unverifiable assumptions and a causal graph structure, is also required to perform causal inference.</p>
<p><strong>4.3</strong> What questions do you have about the reading? These can be conceptual or bigger picture.</p>
<p><strong>Your Response</strong>: Varies</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="reflection-1-pt">
<h1>5. Reflection [1 pt]<a class="headerlink" href="#reflection-1-pt" title="Link to this heading">#</a></h1>
<p><strong>5.1</strong> How much time outside of class did it take you to complete this worksheet? How long did it take you to read the selected pages of the Hernan et al. 2019 article?</p>
<p><strong>Your Response</strong>: Varies</p>
<p><strong>5.2</strong> What is one thing you have a better understanding of after completing this worksheet? This could be about the concepts, the reading, or the code.</p>
<p><strong>Your Response</strong>: Varies</p>
<p><strong>5.3</strong> How comfortable do you feel about your mathematical and programming preparation for this course?</p>
<p><strong>Your Response</strong>: Varies</p>
<div class="tip admonition">
<p class="admonition-title">How to submit</p>
<p>Follow the instructions on the <a class="reference external" href="https://comsc341cd.github.io/resources/submit.html">course website</a> to submit your worksheet.</p>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./worksheets"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ws4.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Worksheet 4 üìà</p>
      </div>
    </a>
    <a class="right-next"
       href="ws2_solution.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">WS 2 Solution üêº</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">WS 1 Solution üé≤</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#course-resources-and-skills-check-1-pt">1. Course resources and skills check [1 pt]</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-interface">Coding interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#math">Math</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#probability-concepts-1-pt">2. Probability concepts [1 pt]</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chance-events">Chance events</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expectation">Expectation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-a-random-variable-and-probability-distributions">Simulating a random variable and probability distributions</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#estimating-a-conditional-expectation-1-pt">3. Estimating a conditional expectation [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hernan-et-al-2019-reading-1-pt">4. Hern√°n et al. 2019 reading [1 pt]</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-1-pt">5. Reflection [1 pt]</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
  Causal Inference for Data Science is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>